th·∫±ng POM
s·∫Ω ƒë·∫£m b·∫£o c√°i vi·ªác l√† t√°ch bi·ªát tr√°ch nhi·ªám - > tr√°ch nhi·ªám ƒë∆°n l·∫ª 
- ph√¢n chia th√†nh 2 th√†nh ph·∫ßn ch√≠nh
1. k·ªãch b·∫£n test(test script):  ƒë·∫°i di·ªán cho business logic
2. ƒë·ªëi t∆∞·ª£ng trang(page object): ƒë·∫°i di·ªán cho technical implenmentation -> t∆∞∆°ng t√°c v·ªõi UI nh∆∞ th·∫ø n√†o
-> chia th√†nh c√°c class -> m·ªói 1 class ƒë·ªãa di·ªán cho 1 trang 

--> gi·∫£i quy·∫øt ƒëc 3 c√°i th√°ch th·ª©c l·ªõn nh·∫•t trong auto
1. t√≠nh d·ªÖ b·∫£o tr√¨: 
- n√≥ s·∫Ω t·∫≠p trung t·∫•t c·∫£ c√°c selector v√† ph∆∞∆°ng th·ª©c c·ªßa trang custom  bao g·ªìm v√≠ d·ª• l√†: company locator
2. T√≠nh t√°i s·ª≠ d·ª•ng:
- t·∫°o ra c√°c ph∆∞∆°ng th·ª©c (actions) ƒë·ªãa di·ªán cho h√†nh vi nghi·ªáp v·ª• (business behavior )
- > v√≠ d·ª• tao c√≥ loginPage.login('user', 'password')
3. T√≠nh d·ªÖ ƒë·ªçc ; 

ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ DRY (don't repeat yourself) => base page( trang c∆° s·ªü) 
basepage -> l√† 1 l·ªõp cha tr·ª´u t∆∞·ª£ng m√† t·∫•t c·∫£ c√°c page object kh√°c (loginpage), s·∫Ω k·∫ø th·ª´a
=> ƒë√≥ng vai tr√≤ nh∆∞ 1 hd giao di·ªán chung. ƒë·ªãnh nghƒ©a t·∫≠p h·ª£p c√°c y·∫øu t·ªë v√† h√†nh ƒë·ªông
m√† m·ªçi trang trong ·ª©ng d·ª•ng d·ªÅu ph·∫£i c√≥ quy·ªÅn truy c·∫≠p

v√≠ d·ª•: h·ªá th·ªëng nh√¢n vi√™n v√† c√¥ng c·ª• chung
-> m·ªçi nh√¢n vi√™n ƒë·ªÅu c·∫ßn s·ª≠ d·ª•ng chung 1 s·ªë c√¥ng c·ª• c·ªßa c√¥ng ty , v√≠ d·ª• nh∆∞ l√† email service





// c·∫•u tr√∫c file h·ªá th·ªëng s·∫Ω x√¢y d·ª±ng cho b·ªô fixture c·ªßa ch√∫ng ta

/// chia nh·ªè tr√°ch nhi·ªám ra 3 file ch√≠nh 
//1. File auth.fixture.ts (t·∫ßng 1 v√† t·∫ßng2): ch·ª©a logic login v√† t·∫°o ra "ng∆∞·ªùi g√°c c·ªïng)
//2. File app.fixture.ts (t·∫ßng 3): ch·ª©a c√¥ng th∆∞ucs t·∫°o ra c√°c POM (dashboard, customer)
//3. Fiel gatekeeper.fixture.ts (t·ªïng h√†nh dinh): n∆°i h·ª£p nh·∫•t t·∫•t c·∫£ l·∫°i ƒë·ªÉ s·ª≠ d·ª•ng

c·∫•u tr√∫c chu·∫©n cho 2 m√¥i tr∆∞·ªùng (dev v√† stagging)
.env (1. c·∫•u h√¨nh chung - ai c≈©ng gi·ªëng nhau)
.env.development (2. c·∫•u h√¨nh ri√™ng cho DEV)
.env.development.local(3. b√≠ m·∫≠t: ch·ªâ m√°y b·∫°n c√≥ - ko up l√™n git)
.env.staging(4. c·∫•u h√¨nh cho m√¥i tr∆∞·ªùng stagging)

.. v·ªã tr√≠ ·ªü root (th∆∞ m·ª•c g·ªëc ) ngang h√†ng v·ªõi package.json



th·ª© t·ª± ∆∞u ti√™n l√†
// bi·∫øn ph·ª•c thu·ªôc l√† NODE_ENV=abc
.env.[NODE_ENV].local ho·∫∑c .env[NODE_ENV]

1. .env (ƒë·ªô ∆∞u ti√™n th·∫•p nh·∫•t)
2. .env.development (trung b√¨nh)
3. .env.development.local(cao nh·∫•t ·ªü m√¥i tr∆∞·ªùng dev)
4. .env.staging (cao nh·∫•t ·ªü m√¥i tr∆∞·ªùng stagging)

//nguy√™n t·∫Øc -> c√°i load s·∫Ω ghi ƒë√® c√°i load tr∆∞·ªõc
tr√™n phi·∫øu NODE_ENV ghi development -> th·ªß th∆∞ s·∫Ω t√¨m t·∫•t c·∫£ m√¥i tr∆∞·ªùng c√≥ t√™n .env.development

tr∆∞·ªùng h·ª£p m√† NODE_ENV ghi staging -> th·ªß th∆∞ s·∫Ω t√¨m c·∫£ m√¥i tr∆∞·ªùng c√≥ t√™n .env.staging

ƒë·ªÉ l·∫•y th√¥ng tin bi·∫øn mt ta d√πng process.env.key m√† ta mong mu·ªëng
process.env.BASE_URL -> https://dev.crm.anhtester.com

 ////
 Dotenv flow hay dotenv ho·∫°t ƒë·ªông d·ª±a tr√™n process.cwd() (current working directory - th∆∞ m·ª•c hi·ªán t·∫°i
 
 dang g√µ l·ªánh)

tr√™n windows -> terminal l√† powershell

tr√™n gitbash/mac/linux/ -> m·∫∑c ƒë·ªãnh

WINDOW
$env:NODE_ENV="staging";  npx playwright test ./tests/env-demo.spec.ts

mac
NODE_ENV=staging npx playwright test ./tests/env-demo.spec.ts

as (alias) 
 "test:dev": "cross-env NODE_ENV=development npx playwright test", -> shorcut -(alias)
    "test:uat": "cross-env NODE_ENV=staging npx playwright test"

    -> cross-env NODE_ENV=development npx playwright test ./tests/env-demo.spec.ts

    npm run test:dev ./tests/env-demo.spec.ts




    //hooks (life cycle)

t·ª© tr·ª• hooks (life cycle)



beforeAll (worker) ---> 1 l·∫ßn duy nh·∫•t /file

beforeEach(test) ch·∫°y l·∫∑p l·∫°i m·ªói l·∫ßn tr∆∞·ªõc M·ªñI test

afterEach(test) . ch·∫°y l·∫∑p l·∫°i m·ªói l·∫ßn sau M·ªñI test

afterAll(worker) -> 1 l·∫ßn duy nh·∫•t sau khi ch·∫°y h·∫øt test

woker reuse

// 4 woker - 100 b√†i test


1. woker 1 ch·∫°y before all (m·ªü page)
2. worker 1 ch·∫°y Test A(login -> chjuyeern sang dashboard)



// playwright th·ª±c hi·ªán 2 b∆∞·ªõc
b1. l√† khoanh v√πng (scoping) = d·ª±ng h√†o r√†o n∆°i folder test ch√∫ng ta s·∫Ω th·ª±c hi·ªán thong qua testDIr
b2. l·∫≠p danh s√°ch ·ª©ng vi√™n () -> qu√©t h·∫øt ƒë·ªÉ l·∫•y fiel theo testMatch
so v·ªõi v√≠ d·ª• checkout.txt -> () ƒë√£ b·ªã b·ªè ƒëi v√¨ ko hoipwj l·ªá
-> ket qua la pw tao dc 1 danh sach noi bo gom nhugn file hop le

khi ƒë√≥ ch√∫ng ta g√µ
npx playwright test checkout ->
checkout.spec.ts  
tests/CRM/checkout.spec.ts 
so v·ªõi tests/checkout.spec.ts -> kh·ªõp (c√≥ ch·ª©a ch·ªØ checkout)
/// tests/logintest.spec.ts ->ko kh·ªõp -. ko ch·∫°y

//c√∫ ph√°p glob (ko ph·∫£i regex)

** -> recursive wildcard -> b·∫•t k√¨ th∆∞ m·ª•c n√†o s√¢u bao nhi√™u c≈©ng ƒë∆∞·ª£c

* -> b·∫•t k√¨ t√™n g√¨ 
.spec.ts -> extenion ƒëu√¥i c·ªë ƒë·ªãnh
**/*.spec.ts => 

projects
M·ª•c ƒë√≠ch 1: t·ªëi ∆∞u h√≥a t√†i nguy√™n 
.. v·∫•n d·ªÅ 100 TCs APi v√† 100 TCs UI
m·ª•c ƒë√≠hc 2: ma tr·∫≠n ki·ªÉm th·ª≠
(test matrix)

m·ª•c ƒë√≠ch 3: ƒêi·ªÅu ph·ªëi lu·ªìng ch·∫°y *orchestration
c√≥ th·ªÉ c√≥ c·∫•u h√¨nh Setup tr·∫°ng th√°i ƒëƒÉng nh·∫≠p -> ch·∫°y test -> tear down
thi·∫øt l·∫≠p s·ª± ph·ª• thu·ªôc v√†oi gi·ªØa c√°c file test


ƒê·∫∑c t√≠nh c·ªßa project -> k·∫ø th·ª´a v√† ghji ƒë√®

///1 ∆Øu ti√™n 1: c√¢uis h√¨nh trong t·ª´ng fiel test 

//∆∞u ti√™n 2: c·∫•u h√¨nh trong trong project

//∆∞u ti√™n 3" c·∫•u h√¨nh trong global


c√°i ri√™ng PROJECT CONFIG S·∫º GHI ƒê√à C√ÅI CHUNG TOP LEVEL CONFIG ->


global config ()


-- chay project them arugment 

--project=name






                chrome  firefox iphone12

    headless    Y           Y       Y    
    slow:       N           Y       N
    Video:       Y          N       N   



- Quy tr√¨nh s√†ng l·ªçc nhi·ªÅu project
=> l·ªõp 1 qu√©t t·ª´ testDir
nhi·ªám v·ª• l√† t√¨m t·∫•t c·∫£ file c√≥ th·ªÉ test d·ª±a v√†o testDir
l√∫c n√†y ch∆∞a quan t√¢m t·ªõi project n√†o c·∫£

l·ªõp 2 gh√©p c·∫∑p d·ª± √°n

== ƒëem t·ª´ng file ·ªü l·ªõp 1 - .∆∞·ªõp v√†op t·ª´ng project
- logic
- ->  


k·∫øt qu·∫£ c·ªßa l·ªõp 2 (danh s√°ch c√¥ng vi·ªác ti·ªÅm nƒÉng)
npx playwright test[]
1. Job A. spec.ts ch·∫°y tr√™n project API (api.spec1.ts)
2. Job B ch·∫°y tr√™n desktop (cart.spec1.ts)
3. Job C ch·∫°y tr√™n desktop (login.spec1.ts)
4. Job D ch·∫°y tr√™n mobile (cart.spec1.ts)
5. Job E. ch·∫°y tr√™n mobile (login.spec1.ts)



l·ªõp 3 b·ªô l·ªçc CLI (user filter) -> l·ªçc l·∫°i danh s√°ch 5 jobs tr√™n d·ª±a ctreen nh·ªØng g√¨ ƒë√£ g√µ
npx playwright test (filter)

1. l√† filter theo t√™n file test login

d·∫•u "/" bi·ªÉu th·ªã cho folder
2. t√¨m theo folder
npx playwright test ui/
3. t√¨m theo project
 --project 
npx playwright test login --project=mobile-ios           
npx playwright test cart --project=mobile-ios           
PW taoh ra cac JOB dua tren FIle + project


GLOBAL Setup (s√°ng s·ªõm): l√†m duy nh·∫•t 1 l·∫ßn
Tests(trong ng√†y): 
GLOBAL TEARDOWN(ƒë√™m mu·ªôn): l√†m duy nh√°t 1 l·∫ßn


//c∆° ch·∫ø storageState -> l∆∞u ƒëc tr·∫°ng th√°i ƒëƒÉng nh·∫≠p c·ªßa t√†i kho·∫£n v√† d√πng cho c√°c test case ti·∫øp theo


// c√≥ 2 c∆° ch·∫ø ƒëƒÉng nh·∫≠p
1.. cookie -based (sesion)
stateful -> server ph·∫£i l∆∞u th√¥ng tin sessionID trong rAm/db => 1 phi√™n ƒëƒÉng nh·∫≠p c·ªßa ng∆∞·ªùi d√πng
browser t·ª± ƒë·ªông l∆∞u v√†o cookie 
sau ƒë√≥ browser t·ª±k ƒë·ªông g·ª≠i k√®m m·ªói request -

2... token -based(jwt) ->  
stateless -> server ko l∆∞u tr·ªØu g√¨ c·∫£, th√¥ng tin n·∫±m h·∫øt ·ªü trong token
-client (Fe) s·∫Ω c√≥ clogic ƒë·ªÉ l∆∞u v√†o local storage (ho·∫∑c cookie)
- client ph·∫£i t·ª± code ƒë·ªÉ g·∫Øn v√†o header (FE) => m·ªói 1 request ph·∫£i c√≥ Authorization: Bearer........





B1. G√µ npx playwright test///
B2. t·ªïng h·ª£p. ƒë·ªçc config. ƒëock file test  (parsed file test)
B3. ph√¢n c√¥ng : goi worker (nh√¢n vi√™n l√†m vi·ªác hay l√† os process.) 
B4. T·∫°o h·ªì s∆° >: Runner t·∫°o ra 1 c√°i object g·ªçi testInfo. ƒëi·ªÅn h·∫øt th√¥ng tin
title:
projecte:
worker.
retry....
B5; Injection -> cho v√†o tham s·ªë th·ª© 2 c·ªßa h√†m test({page, fitureA, fixtureB}, testInfo)

Nh√≥m ch·ª©c nƒÉng: l·∫•y th√¥ng tin (Read only)
title -> t√™n b√†i test
project.name t√™n project
file _. ƒë∆∞·ªùng d·∫´n file test
retry s·ªë l·∫ßn ch·∫°y l·∫°i 
status -> tr·∫°ng th√°i c·ªßa fiel test th∆∞·ªùng d√πng ·ªü after each
duration -> th·ªùi gian ch·∫°y -> c≈©ng th∆∞·ªùng d√πng ·ªü aftger each

Nh√≥m ch·ª©c nƒÉng : ƒëi·ªÅu khi·ªÅn lu·ªìng ()
- testInfo.skip(); b·ªè qua file test
test.skip()
- testInfo.setTimeout()
-testInfio.fail()

Nh√≥m ch·ª©c nƒÉng L: b√°o c√°o
testInfo.attach()
testInfo.annnotations (note)

l·∫•y l√∫c ch·∫°y file test (runTime) -> l·∫•y ƒë∆∞·ª£c status. duration 

ph·∫°m vi

-... s·∫Ω t·∫ßng global 
--.. t·∫ßng group (describe)
--.t·∫ßng function 

quy t·∫Øc ghi ƒë√® khi s·ª≠ d·ª•ng test v√† testInfo ·ªü nh√≥m ch·ª©c nƒÉng ƒëi·ªÅu khi·ªÅn lu·ªìng

-> C√ÄNG V√ÄO S√ÇU (SCOPE H·∫∏P H∆†N) th√¨ c√†ng c√≥ quy·ªÅn l·ª±c cao h∆°n


TAGS #


ƒë·ªÉ ch·∫°y ta s·∫Ω d√πng --grep "@tag"
-g "@tag"
--grep-invert "@tag" -> ch·∫°y b√†i test b·ªè qua th·∫±ng @tag

suwr dunjg ho·∫∑c LOGIC OR
-> s·ª≠ d√πng syntax | 

C√≥ 3 giai ƒëo·∫°n khi m√† ch√∫ng ta g√µ npx playwrigh test ...
-GD1: MAIN PROCESS (QU√âT FILE)
- ƒëƒÉng k√≠ c√°c file test (ghi danh )
- ·ªü ƒë√¢y main procews sko ch·∫°y h√†m async ({page})
-. sau khi ƒë·ªçc h·∫øt xong -> c√≥ 1 danh s√°ch t·ªïng -> ghi l·∫°i l√† trong n√†y c√≥ 1 b√†i test t√™n l√† TEST A.. -> d√≤ng s·ªë 10.. thu·ªôc scenario....
- ti·∫øp ƒëi·ªán ph·ª• thu·ªôc v√†o filter m√† ch√∫ng ta ƒë∆∞a cho --grep (tag), t√™n file...folder..
-. n√≥ s·∫Ω t√≠nh to√°n c·∫ßn boa nhi√™u worker (c√°i n√†y ph·ª• thu·ªôc v√†o setup cuar ng∆∞·ªùi d√πng ho·∫∑c default tgwj t√≠nh to√°n)
- n√≥ chia vi·ªác
--
GD2/ Th·∫±ng WOKER l√†m vi·ªác
Mian process ko g·ª≠i code m√† g·ª≠i m·ªánh l·ªánh qua k·ªánh IPC (inter process communication)

GD3// worker process - ng∆∞·ªùi th·ª£ ------
kh·ªüi ƒë·ªông, n√≥ nh∆∞ 1 t·ªù gi·∫•y tr·∫Øng n√≥ nh·∫≠n l·ªánh v√† b√°t d·∫ßu l√†m vi·ªác
+. Load l·∫°i file (re-evaluation)
+ v√† check l·∫°i v·ªõi file test m·ªánh l·ªánh t·ª´ main process -> n·∫øu ƒë√∫ng nh·∫£y v√†o c√°i ru·ªôt body
+ n·∫øu sai skip lu√¥n

t·ªïng ƒë√†i taxi
:: main process: t·ªïng ƒë√†i vi√™n
::worker process: t√† x·∫ø taxi
"file test: t·∫•m b·∫£n ƒë·ªì th√†nh ph·ªë


-Data - driven
c√≥ 1 b·ªô data -> m√¨nh s·∫Ω ch·∫°y h·∫øt c√°c info trong b·ªô data ƒë·ªë v·ªõi 1 tcs
- gi√° tr·ªã bi√™n, min, max length.... m·ªói 1 case n√†y -> s·∫Ω c√≥ 1 b·ªô d·ªØ li·ªáu
- th√¨ b√¢y gi·ªù n·∫øu vi·∫øt file test th√¨ th√¥ng th∆∞·ªùng ta s·∫Ω ph·∫£i vi·∫øt b·∫±ng ·∫•y file test t∆∞∆°ng ·ª©ng v·ªõi 
n s·ªë d·ªØ li·ªáu
- d√πng 1 b·ªô test -> s·ª≠ d·ª•ng v√≤ng l·∫∑p ch·∫°y qua c√°c d·ªØ li·ªáu v√† ch·∫°y v√†o file test


NGUY√äN T·∫ÆC V√ÄNG:
d·ªØ li·ªáu d√πng ƒë·ªÉ sinh TEST  (parameter) ph·∫£i l√† d·ªØ li·ªáu tƒ©nh (STATIC), ho·∫∑c ƒë·ªìng b·ªô t·∫°i th·ªùi ƒëi·ªÉm ch·∫°y l·ªánh

- CH·∫°y parallel (song song). s·∫Ω gi√∫p t·ªëc ƒë·ªô nahnh g·∫•p N l·∫ßn (N = s·ªë l∆∞·ª£ng worker/cpu c·ªßa m√°y)

+ H·ªá th·ªëng nahf h√†ng
Main process: QU·∫£n l√Ω nh√† h√†ng
Woker process: l√† ƒë·∫ßu b·∫øp
File test(.spec.ts): ;√† s√°ch c√¥ng th·ª©c


1. Quy t·∫Øc s·∫Øp x·∫øp file (th·ª±c ƒë∆°n t·ª´ A-Z)
v√≥ duk file n√†o c√≥ b·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ A s·∫Ω s·∫Øp tr√™n c√πng ∆∞u ti√™n nh·∫•t -> Z
theo th·ª© t·ª± alphabet
v√≠ d·ª• ·ªü h·ªá th·ªëng nh√† h√†ng c√≥ 3 file
01_A.spec.ts (m√≥n khai v·ªã) - x·∫øp ƒë·∫ßu ti√™n
02_B.Spec.ts (m√≥n b√≤) - x·∫øp th·ª© 2
03_C.spec.ts (m√≥ b√°nh) - x·∫øp cu·ªëi c√πng

2. C∆° ch·∫ø ph√¢n chia worker (AI NHANH H∆Ø·ªûNG NHI·ªÄU)

v√≠ d·ª• ta c√≥ 2 ƒë·∫ßu b·∫øp worker1 v√† worker 2
- C·∫£nh 1 : ph√¢n chia ban ƒë·∫ßu
-> 2 ƒë·∫ßu b·∫øp t·ªõi b·∫£ng c√¥ng vi·ªác 
- wokker1 nhanh tay -> m√≥n khai v·ªã
- woker 2 -> gi·∫≠t t·ª´ m√≥n b√≤

c·∫£nh 2: ch√™nh l·ªánh t·ªëc ƒë·ªô
- ƒê·∫ßu b·∫øp 1: woker 1 th·∫•y m√≥n khai v·ªã l√†m r·∫•t nhanh -> v√®o c√°i l√†m xong 2phust
woker 2. l√†m m√≥n b√≤ l√¢u h∆°n m√¢t 5p

C·∫£nh 3 quay l·∫°i h√†ng ch·ªù (queue)

- worker 1 l·∫•y m√≥n b√°nh ƒë·ªÉ l√†m

=> cu·ªëi c√πng
worker 1: m√≥n 1 + 3
worker 2: m√≥n 2 


01_fast.spec.ts
02_slow.Spec.ts 
03_fast.spec.ts 
04_fast.spec.ts
2 worker 
üöÄ [Worker 2] B·∫ÆT ƒê·∫¶U: 02_slow.spec.ts
[chromium] ‚Ä∫ tests\lessons\parallel\01_fast.spec.ts:3:1 ‚Ä∫ Test 01 (Nhanh)
üöÄ [Worker 1] B·∫ÆT ƒê·∫¶U: 01_fast.spec.ts
‚úÖ [Worker 1] K·∫æT TH√öC: 01_fast.spec.ts
[chromium] ‚Ä∫ tests\lessons\parallel\03_fast.spec.ts:3:1 ‚Ä∫ Test 03 (Nhanh)
üöÄ [Worker 1] B·∫ÆT ƒê·∫¶U: 03_fast.spec.ts
‚úÖ [Worker 1] K·∫æT TH√öC: 03_slow.spec.ts
[chromium] ‚Ä∫ tests\lessons\parallel\04_fast.spec.ts:3:1 ‚Ä∫ Test 04 (Nhanh)
üöÄ [Worker 1] B·∫ÆT ƒê·∫¶U: 04_fast.spec.ts
‚úÖ [Worker 1] K·∫æT TH√öC: 04_slow.spec.ts
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:3:1 ‚Ä∫ Test 02 (Si√™u ch·∫≠m)
‚úÖ [Worker 2] K·∫æT TH√öC: 02_slow.spec.ts




c√≥ 2 c·∫•p ƒë·ªô 1 l√† c·∫•pp ƒë·ªô file test
2 alf c·∫•p ƒë·ªô test case ·ªü trong file test


A
B
C
D
E


üîµ [Worker 2] ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu l√†m M√≥n B
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:4:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n A
üî¥ [Worker 1] ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu l√†m M√≥n A
üî¥ [Worker 1] ‚úÖ Xong M√≥n A
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:10:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n B
üîµ [Worker 2] ‚úÖ Xong M√≥n B
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:16:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n C
üü¢ [Worker 2] ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu l√†m M√≥n C
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:22:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n D
üü† [Worker 1] ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu l√†m M√≥n D
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:16:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n C
üü¢ [Worker 2] ‚úÖ Xong M√≥n C
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:22:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n D                                                                                     
üü† [Worker 1] ‚úÖ Xong M√≥n D
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:28:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n E                                                                                     
üü£ [Worker 1] ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu l√†m M√≥n E
üü£ [Worker 1] ‚úÖ Xong M√≥n E

01_fast.spec.ts
02_slow.spec.ts - M√≥n A
02_slow.spec.ts - M√≥n B
02_slow.spec.ts - M√≥n C
02_slow.spec.ts - M√≥n D
02_slow.spec.ts - M√≥n E
03_fast.spec.ts 
04_fast.spec.ts



üî¥ [Worker 2] ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu l√†m M√≥n A
[chromium] ‚Ä∫ tests\lessons\parallel\01_fast.spec.ts:3:1 ‚Ä∫ Test 01 (Nhanh)
üöÄ [Worker 1] B·∫ÆT ƒê·∫¶U: 01_fast.spec.ts
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:4:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n A
üî¥ [Worker 2] ‚úÖ Xong M√≥n A
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:10:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n B
üîµ [Worker 2] ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu l√†m M√≥n B
[chromium] ‚Ä∫ tests\lessons\parallel\01_fast.spec.ts:3:1 ‚Ä∫ Test 01 (Nhanh)
‚úÖ [Worker 1] K·∫æT TH√öC: 01_fast.spec.ts
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:16:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n C
üü¢ [Worker 1] ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu l√†m M√≥n C
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:10:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n B
üîµ [Worker 2] ‚úÖ Xong M√≥n B
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:22:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n D                                                                                     
üü† [Worker 2] ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu l√†m M√≥n D
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:16:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n C
üü¢ [Worker 1] ‚úÖ Xong M√≥n C
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:28:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n E                                                                                     
üü£ [Worker 1] ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu l√†m M√≥n E
üü£ [Worker 1] ‚úÖ Xong M√≥n E
[chromium] ‚Ä∫ tests\lessons\parallel\02_slow.spec.ts:22:3 ‚Ä∫ B·ªô Test N·∫∑ng K√Ω (5 m√≥n) ‚Ä∫ M√≥n D                                                                                     
üü† [Worker 2] ‚úÖ Xong M√≥n D
[chromium] ‚Ä∫ tests\lessons\parallel\03_fast.spec.ts:3:1 ‚Ä∫ Test 03 (Nhanh)
üöÄ [Worker 1] B·∫ÆT ƒê·∫¶U: 03_fast.spec.ts
[chromium] ‚Ä∫ tests\lessons\parallel\04_fast.spec.ts:3:1 ‚Ä∫ Test 04 (Nhanh)                                                                                                      
üöÄ [Worker 2] B·∫ÆT ƒê·∫¶U: 04_fast.spec.ts
[chromium] ‚Ä∫ tests\lessons\parallel\03_fast.spec.ts:3:1 ‚Ä∫ Test 03 (Nhanh)
‚úÖ [Worker 1] K·∫æT TH√öC: 03_slow.spec.ts
[chromium] ‚Ä∫ tests\lessons\parallel\04_fast.spec.ts:3:1 ‚Ä∫ Test 04 (Nhanh)                                                                                                      
‚úÖ [Worker 2] K·∫æT TH√öC: 04_slow.spec.ts


//TRACE VIEW

l√† t·∫≠p h·ª£p c√°c SNAPSHOT DOM 

Flaky Test  -> Test ch·∫≠p ch·ªùn


khi m√† deploy code l√™n PROD => ·ªü 1 s·ªë cty hi·ªán ƒë·∫°i v√† c√≥ quy tr√¨nh chu·∫©n -> trigger Automation test (pipeline)
v·ªõi b·ªô TCs regression test li√™n quan t·ªõi CR golive ƒë√≥. -> n·∫øu m√† ch·∫°y regress fail -> deploy b·ªã block v√† ko ƒëc ch·∫°y n·ªØa
-> ƒë·ªçi BE/FE ph·∫£i ch·ªù ng·ªìi ch·∫°y l·∫°i 10 -15p qu√° tr·ªùi deploy l·∫°i. 


c∆° ch·∫ø "T·ª± ch·ªØa l√†nh" t·∫°m th·ªùi ƒë·ªÉ h·ªá th·ªëng v·∫≠n h√†nh tr∆°n tru


ALure Report

import type {
  FullConfig, FullResult, Reporter, Suite, TestCase, TestResult
} from '@playwright/test/reporter';

class MyReporter implements Reporter {
    ///Playwright test bawtsa dadafu ch·∫°y  kh·ªüi t·∫°o bi·∫øn ƒë·∫øm (pass =0, fail =0) (before all)
  onBegin(config: FullConfig, suite: Suite) {
    console.log(`Starting the run with ${suite.allTests().length} tests`);
  }

  //B·∫Øt ƒë·∫ßu 1 file test  (before each)
  onTestBegin(test: TestCase, result: TestResult) {
    console.log(`Starting test ${test.title}`);
  }


    //afterEach (ch·∫°y sau khi file test k·∫øt th√∫c) (n·∫øu test fail => g·ª≠i noti qua Msteam......)
  onTestEnd(test: TestCase, result: TestResult) {
    console.log(`Finished test ${test.title}: ${result.status}`);
  }

  // afterALl (ch·∫°y h·∫øt b√†i test)=> t√≠nh t·ªïng bn test case pass fai. g·ª≠i b√°o cc√°o. slack/email
  onEnd(result: FullResult) {
    console.log(`Finished the run: ${result.status}`);
  }
}

export default MyReporter;


ALLURE REPORT  -> c√≥ th·ªÉ l∆∞u history r·∫•t nhi·ªÅu l·∫ßn ch·∫°y

npx playwright test trace --config playwright.lessons.config.ts 

./scripts/allure-history.sh 
powershell -ExecutionPolicy Bypass -File ./scripts/allure-history.ps1

allure open ./allure-report



API = Application Programming Interface
Application: l√† gi·ªëng c√°c ph·∫ßn m·ªÅm Facebook. z√©p l√†o, 
programming: alf c√°ch ch√∫ng ƒëc vi·∫øt ra b·∫±ng code
interface -> n√≥ l√† n∆°i g·∫∑p g·ª°, c·∫ßu n√≥i ƒë·ªÉ 2 th·∫±ng xa l·∫° n√≥i chuy·ªán ƒë∆∞·ª£c v·ªõi nhau


B·∫°n (FE): ng·ªìi ·ªü b√†n ƒÉn.. M√¨nh mu·ªën ƒÉn b√°nh m√¨ pate

Nh√† b·∫øp: (BE): l√† n∆°i ch·ª©a th·ªã b√≤, gia vv·ªã. ƒë·∫ßu b·∫øp

V·∫•n ƒë·ªÅ: c·∫ßn 1 th·∫±ng b·ªìi b√†n API

B·ªìi b√†n (API) s·∫Ω l√†m c√°c vi·ªác
+B1 ( Request):: ƒê∆∞au th·ª±c ƒë∆°n cho b·ªìi b√†n (cho t√¥i 1 b√°nh m√¨ pate k√®m d∆∞a chu·ªôt)
+B2 Process: b·ªìi b√†n mang t·ªù gi·∫•y ƒë√≥ d∆∞ua cho ƒë·∫ßu b·∫øp
+B3 Response : b·∫øp n·∫•u xong., b·ªìi b√†n ƒë∆∞a ƒëƒ©a ch·ª©a b√°nh m√¨ pate cho b·∫°n 


Hi·ªán nay c√≥ nh·ªØng c√¥ng ngh·ªá n√†o ƒë·ªÉ th·∫±ng API tr·ªï t√†i, 

1. L√† Restful API: thay th·∫ø (SOAP API)
V√≠ d·ª•: M√¨nh ƒëang ƒë·ª©ng tr∆∞·ªõc 1 c√°i m√°y b√°n n∆∞·ªõc t·ª± ƒë·ªông (BE)
-. Tr√™n m√°y c√≥ c√°c n√∫t A(coca), B)(pepsi) => ƒë√¢y l√† ch√≠nh l√† endpoint (/coca, /pepsi)
-> v√≠ d·ª• mu·ªën u·ªëng coca -> ·∫•n n√∫t A -> m√°y nh·∫£ ra 1 lon coca
=> v·∫•n ƒë·ªÅ v·ªõi chu·∫©n resful API:
= Th·ª´a m·ª©c: nh·∫£ ra lon 330ml => u·ªëng c√≥ 1 ng·ª•m n√©m ƒëi -> ph√≠ ph·∫°m (t·ªën bƒÉng th√¥ng)
- m·∫•t c√¥ng: coca + bimbim => nh·∫•n 2 l·∫ßn . 1 l·∫ßn l√† A -> 1 l·∫ßn C (bimbim) -=> thao t√°c 2 l·∫ßn g·ª≠i 2 request

2. Do ph·ªü b√≤ ph√°t tri·ªÉn -> GraphQL 
B·ªëi c·∫£nh: M√¨nh v√†o 1 qu√°n bar x·ªãn x√≤, g·∫∑p anh bartender (BE)
- C√°ch ho·∫°t ƒë·ªông:
- Bartender ko ƒë∆∞a menu c·ªë ƒë·ªãnh., => ƒë∆∞a cho 1 t·ªù gi·∫•y tr·∫Øng v√† 1 c√°i b√∫t
-> m√¨nh vi·∫øt y√™u c·∫ßuL cho 1 ly cocktail: 30% r∆∞·ª£u rum, 50% nc cam, 2 l√°t chanh, KO ƒë∆∞·ªùng

-> Bartender pha ch·∫ø y h·ªát c√¥ng th·ª©c ƒë√≥ v√† ƒë∆∞ua cho 1 ly duy nh·∫•t
∆Øu ƒëi·ªÉm: 
Ch√≠nh x√°c: -> y√™u c·∫ßu g√¨ ƒëc n·∫•y. ko th·ª´a ƒë∆∞·ªùng, thi·∫øu chanh
-. ti·ªán l·ª£i,. n·∫øu th√™m 1 ƒë·ªãa l·∫°c, -=> th√™m v√†o t·ªù gi·∫•y -=> anh bartender s·∫Ω mang ra Trong 1 request


3. Websocket: 
- B·ªëi c·∫£nh: v√≠ d·ª• c·∫ßn b∆°m ƒë·∫ßy b·ªÉ b∆°i
-= c√°ch ho·∫°t ƒë·ªông: ko d√πng thau ch·∫≠u -> n·ªëi 1 c√°i ·ªëng d·∫´n n∆∞·ªõc (socket connection) tahwngr t·ª´ nh√† m√°y nc 
v√†o c√°i b·ªÉ -> nc ch·∫£y li√™n t·ª•c (data stream) -<> h·ªÖ nh√† m√°y b∆°m nc th√¨ c√°i b·ªÉ nh·∫≠n ƒëc ngay n∆∞·ªõc t·ª©c th√¨
·ª©ng d·ª•ng: coin, ch·ª©ng, gi√° v√†ng.
ƒë·ªô tr·ªÖ th·∫•p

playwright c∆° ch·∫ø c·ªßa n√≥ l√† websocket -> giao ti·∫øp tr·ª±c ti·∫øp v·ªõi browser

m·ªói cty c√≥ 1 √¥ng SA 



ti·∫øp theo
th√¨ ƒë·ªÉ 2 th·∫±ng giao ti·∫øp v·ªõi nhau qua c√¢y c·∫ßu API th√¨ ph·∫£i c√≥ ng√¥n ng·ªØ chung 

v√≠ d·ª• FE( l√† ng∆∞·ªùi vi·ªát nam) (code b·∫±ng type script)
BE l√† ng∆∞·ªùi M·ªπ tho (code = Java/python)

th√¨ ƒë·ªÉ d√πng API n√≥i chuy·ªán v·ªõi 2 √¥ng n√†y th√¨ c·∫ßn 1 ng√¥n ng·ªØ chung -. JSON (javascript object notation)

c·∫•u tr√∫c JSON r·∫•t ƒë∆°n gi·∫£n y x√¨ object c·ªßa typescript

{
  "ten": "teo",
  "tuoi": 25
}



AUTHENTICATION V√Ä AUTHORIZATION  v√† c∆° ch·∫ø JWT

authen: x√°c th·ª±c b·∫°n l√† ai (401)

author: b·∫°n ƒë∆∞·ª£c l√†m g√¨? (403)

route 
/admin/dashboard 
/guest/dashboad

JWT (JSON WEB TOKEN)

session-based (statefull)

JWT - stateless 

encode: m√£ h√≥a 
decode: gi·∫£i m√£ h√≥a ch·ªØ k√≠ l√† kh·ªõp v·ªõi ch·ªØ k√≠ m√¨nh k√≠ v·ªõi th·∫±ng user tr∆∞·ªõc ƒë√≥ -> ok pass m√†y ƒëc authen 
C·∫§U TR√öC jwt
AA.BB.CC
3 PH·∫¶N
PH·∫¶N 1. header AA 
ch·ª©a htoong tin v·ªÅ thu·∫≠t to√°n m√£ h√≥a
ph·∫ßn 2. BB. *payload - ch·ª©a d·ªØ li·ªáu m√† server mu·ªën g·ª≠i g·∫Øm. th∆∞·ªùng l√† th√¥ng tin user
{

  "role": "guest"

}
m√£ h√≥a ·ªü base 64(ao c≈©ng d·ªãch ng∆∞·ª£c)
ph·∫ßn 3. ch·ªØ k√≠ b·∫£o m·∫≠t 
ƒë√¢y l√† ph·∫ßn ƒë·∫£m b·∫£o t√≠nh to√†n v·∫πn . server s·∫Ω t·∫°o ra ch·ªØ k√≠ b·∫±ng c√¥ng th·ª©c
Sign = Hash(HEADER + PAYLOAD + SecretKey)

v√≠ d·ª• nh∆∞ hacker c·ªë s·ª≠a payload 
{
  "role" "admin"
}
=> sign -> g·ª≠i l√™n server . server decode l·∫°i c√°i ch·ªØ k√≠ ƒë·∫•y v√† check v·ªõi secretKey => t·ª´ ch·ªëi (reject)

{
  "username": "test1",
  "email": "test1@example.com",
  "password": "123456789"
}

//ƒëƒÉng k√≠ th√†nh c√¥ng
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InRlc3QxQGV4YW1wbGUuY29tIiwiZXhwIjoxNzY3ODc4NzgxLCJpYXQiOjE3Njc4NzY5ODEsInJvbGUiOiJzdGFmZiIsInN1YiI6MiwidXNlcm5hbWUiOiJ0ZXN0MSJ9.gGJbULPq3yp9CTmLlQvkmnJFarfEcFn2tJJvqdlJgio",
  "refresh_token": "4mcgL_-HYEvrTxKATA_B2_NFCVsLSi_1yjxGiV-3HNk=",
  "token_type": "Bearer",
  "expires_in": 1800,
  "expires_at": "2026-01-08T13:26:21.976115342Z",
  "user": {
    "id": 2,
    "username": "test1",
    "email": "test1@example.com",
    "role": "staff"
  }
}
  "exp": 1767878781,

expired.. t·∫°i sao token h·∫øt h·∫°n 
client (FE) s·∫Ω √¢m th·∫ßm s·ª≠ d·ª•ng refreshToken ƒë·ªÉ xin server c·∫•p l·∫°i 1 access token m·ªõi m√† user ko h·ªÅ bi·∫øt
a-string-secret-at-least-256-bits-long <- v√≠ d·ª• secretkey 

trong c·ª•m header
Authorization Bearer <token>


Path param v√† query param


Path Parameter (tham s·ªë d∆∞·ªùng d·∫´n)
v·ªã tr√≠ n·∫±m trong enpoint (URL) sau d·∫•u /
vai tr√≤: ƒë·ªãnh danh (indentifier)

viis d·ª• m√¨nh l∆∞·ªõt s·ªëp pe c√≥ r·∫•t nhi·ªÅu s·∫£n ph·∫©m 
nh∆∞ng m√† t√¥i mu·ªën xem n·ªôi dung c·ªßa snar ph·∫©m c√≥ id l√† 12345
=> s·∫Ω d√πng path parameter 
URL: soppe/products/12345
method GET

query param (tham s·ªë truy v·∫•n)

n·∫±m sau d·∫•u ? v√† n·ªëi v·ªõi nhau b·∫±ng d·∫•u v√† &
vai tr√≤: b·ªô l·ªçc/ s·∫Øp x·∫øp (filter/sort).n√≥ ko l√†m thay ƒë·ªïi t√†i nguy√™n ch·ªâ thay ƒë·ªïi c√°ch hi·ªÉn th·ªã

/v√†o soppet v√† m√¨nh mu·ªën t√¨m c√°i √°o thun c√≥ m√†u ƒë·ªè

URL' soppe/products/search?keyword=ao-thun&color=red


ph√¢n trang (pagination)

ph√¢n trang s·∫Ω th∆∞·ªùng d√πng 2 tham s·ªë ch√≠nh thu·ªôc query param
1/ page: ch·ªâ cho ta bi·∫øt l√† trang s·ªë m·∫•y (v√≠ du 1 2 3) page = 1
2/ limit (size, per_Page): l·∫•y bao nhi√™u b·∫£n ghi m·ªói trang


//????offset (v·ªã tr√≠ b·∫Øt ƒë·∫ßu)
Trang 1: offset=0, litmit = 10
Trang 2: offset=10, limit = 10


///kb: ki·ªÉm tra s·ªë l∆∞·ª£ng limit

input page 1, limit 5; => expect api tr·∫£ v·ªÅ ƒë√∫ng 5 item
. ki·ªÉm tra logic chuy·ªÉn trang 
v√≠ d·ª•: g·ªçi page 1 l·∫•y 5 item d·∫ßu -> sau ƒë√≥ g·ªçi page 2.
expect d·ªØ li·ªáu ·ªü page 2 ph·∫£i kh√°c page 1 (tr√°nh l·ªói g·ªçi trang 2 m√† v·∫´n tr·∫£ v·ªÅ d·ªØ li·ªáu trang 1)


qu√©t to√†n b·ªô b·∫£n ghi t√¨m s·∫£n ph·∫©m a n·∫±m ·ªü trang n√†o trong 10 trang

multipart/form-data

v√≠ d·ª•.
JSON: application/json: gi·ªëng nh∆∞ vi·∫øt 1 b∆∞c th∆∞ tay m·ªçi th·ª© ph·∫£i l√† k√≠ t·ª± (text)
Form data: (multipart/form-data): gi·ªëng nh∆∞ m√¨nh n√≥i v·ªõi server l√† t√¥i s·∫Ω g·ª≠i cho √¥ng 1 container h√†ng h√≥a
b√™n trong c√≥ th·ªÉ text, ·∫£nh , file
ekyc 
b·∫£n ch·∫•t khi m√¨nh ekyc -> m√°y ·∫£nh s·∫Ω ch·ª•p n c√°i ·∫£nh. 8 c√°i ·∫£nh
-> n√≥ s·∫Ω g·ªçi 1 API form-data -> g·ª≠i 8 c√°i ·∫£nh + video liveness
 -> sang 1 con service x·ª≠ l√Ω x√°c th·ª±c  -> tr·∫£ l·∫°i res cho FE (app)
-> app tr·∫£ k·∫øt qu·∫£ cho ng∆∞·ªùi d√πng
steam d√≤ng ch·∫£y

d·ªØ li·ªáu file ch·∫£y v√†o ƒë·∫øn ƒë·∫ßu -> server ghi d·ªØ li·ªáu ƒë·∫øn ƒë·∫•y



header
<form method= 'POST'>
body username=admin&password=password&123
& => %26 => password%26123
body: json {
"username": "admin",
"password" : "password@123"
}

body: {

  username: "Nguy·ªÖn VƒÉn A",
}
k√≠ t·ª± NON-ASCII

√™ -> UTF-8 byte => %E1%BB%85


h·ªá th·ªëng URL g·ªëc ch·ªâ ch·∫•p nh·∫≠n b·∫£ng m√£ ASCII (c√°c k√≠ t·ª± a-z, 0-9)
oauth2 authentication (ƒëƒÉng nh·∫≠p web m√† th√¥ng qua google, facebook, z√©p l√†o....)
header => application/x-www-form-urlencode
PK 

ƒë·ªÉ c√≥ 1 clean pattern API framework
ch√∫ng ta ph·∫£i chia nh·ªè c√°c module th√†nh nh·ªØng ph·∫ßn reuse cho c√°c m·ª•c ƒë√≠ch kh√°c nhau

s·∫Ω chia c√°c api thu·ªôc 1 nh√≥m th√†nh 1 service ()

m√¥ h√¨nh nguy√™n kh·ªëi t√¢t c·∫£ c√°c module t·∫≠p h·ª£p th√†nh 1 kh·ªëi to (v√≠ d·ª• payment, noti, ekyc)

m√¥ h√¨nh microservices => chia nh·ªè c√°c modile th√†nh c√°c service kh√°c nhau. m·ªói service s·∫Ω qu·∫£n l√Ω 1 c√¥ng vi·ªác c·ªßa ri√™ngnos
c√°c kh·ªëi li√™n k·∫øt b·ªüi c·∫ßu n·ªëi API (restful api, grpc, graphql), m√¥ h√¨nh pub/sub (rabbit mq, kafka...., event message)

m√¨nh s·∫Ω caafn 1 th·∫±ng chung chia s·∫ª t·∫•t c·∫£ c√°c method, m√† c√°c th√†nh ph·∫ßn con c√≥ th·ªÉ s·ª≠ d·ª•ng

v√≠ d·ª• nh∆∞ service Product ch·ªâ quan t√¢m t·ªõi vi·ªác, get th√¥ng tin s·∫£n ph·∫©m,t·∫°o s·∫£n ph·∫©m, upoad ·∫£nh s·∫£n ph·∫©m.. m√† n√≥ ko c·∫ßn bi·∫øt 
g√¨ v·ªÅ vi·ªác call api nh∆∞ n√†o,.... 

baseService


 "data": [
    {
      "id": 30,
      "name": "AeroPress Original + Travel Kit",
      "type": "equipment",
      "unit_type": "piece",
      "description": "B·ªô pha c√† ph√™ AeroPress Original k√®m t√∫i du l·ªãch. Compact v√† versatile.",
      "price_per_unit": 950000,
      "warranty_months": 12,
      "specifications": {
        "brand": "AeroPress",
        "model": "Original",
        "brewing_methods": [
          "Standard",
          "Inverted",
          "Cold brew"
        ],
        "capacity": "1-3 cups",
        "brewing_time": "1-2 ph√∫t",
        "filter_type": "Micro paper filters",
        "origin": "USA",
        "features": [
          "BPA-free plastic",
          "Portable",
          "Easy cleanup",
          "350+ included filters"
        ],
        "includes": [
          "AeroPress",
          "Paddle",
          "Scoop",
          "Funnel",
          "Filter holder",
          "350 filters",
          "Tote bag"
        ],
        "color_options": [
          "Gray/Black"
        ]
      },
      "is_active": true,
      "created_at": "2026-01-07T17:45:05Z",
      "updated_at": "2026-01-07T17:45:05Z"
    },



    ƒë·ªÉ th·ª±c hi·ªán l∆∞u token cho c√°c b√†i test ƒë·ªëi v·ªõi API
    ch√∫ng ta c·∫ßn l∆∞u tr·ª±c ti·∫øp v√†o file v·ªõi ph·∫ßn tr√≠ch xu·∫•t jwt - token
    v√† s·∫Ω x·ª≠ l√Ω ƒë·ªçc file ƒë√≥ ƒë·ªÉ l·∫•y token


    Th√¨ 
    GET -> l·∫•y d·ªØ li·ªáu
    POST -> t·∫°o m·ªõi d·ªØ li·ªáu
    PUT/PATCH: b·∫£n ch·∫•t l√† thay ƒë·ªïi th√¥ng tin c·ªßa ƒë·ªëi t∆∞·ª£ng ƒë√£ c√≥ trong db
    PUT: -> s·∫Ω thay ƒë·ªïi to√†n b·ªô th√¥ng tin c·ªßa s·∫£n ph·∫©m v√† y√™u c·∫ßu ph·∫£i ƒë·∫ßy ƒë·ªß body truy·ªÅn l√™n
    N·∫øu truy·ªÅn thi·∫øu th√¨ tr∆∞·ªùng ƒë√≥ m·∫∑c ƒë·ªãnh s·∫Ω tr·ª≠o v·ªÅ null -> ho·∫∑c v·ªÅ default t√πy nghi·ªáp v·ª•
    c√≥ nh∆∞unxg tr∆∞·ªùng required b·∫Øt bu·ªôc ph·∫£i ƒë·∫©y l√™n -> v√≠ d·ª• nh∆∞u t√™n s·∫£n ph·∫©m 
    PATCH: -> se thay ƒë·ªïi th√¥ng tin c·ªßa s·∫£n ph·∫©m theo body truy·ªÅn l√™n m√† ko ·∫£nh h∆∞·ªüng t·ªõi c√°c th√¥ng tin kh√°c 
    nghƒ©a l√† ta mu√≥n thay ƒë·ªïi g√¨ th√¨ ta truy·ªÅn l√™n


  intercept l√† g√¨
  g·ªçi API t·ª´ FE -> BE 
REAL API -> BE 
intercept -> g·ªçi nh√¢n vi√™n (playwright) ch·∫∑n ngay t·ª´ b√†n.
 r√∫t ra c√°i m√≥n ƒÉn c√≥ h√¨nh th·ª©c g·∫ßn gi·ªëgn ho·∫∑c gi·ªëng h·ªát c√°i th·∫≠t . M√Ä BE ko h·ªÅ bi·∫øt g√¨ v·ªÅ vi·ªác n√†y
tr·∫£ l·∫°i cho ng∆∞·ªùi d√πng c√°i response gi·∫£ m√† m√¨nh y√™u c·∫ßu
mock: gi·∫£ l·∫≠p response tr·∫£ ra t·ª´ BE cho th·∫±ng FE

- Speed: T·ªëc ƒë·ªô ; ko ch·ªù server x·ª≠ l√Ω . ko ch·ªù m·∫°ng. Response tr·∫£ v·ªÅ t·ª©c th√¨.
- D·ªØ li·ªáu s·∫°ch: ko t·∫°o data r√°c trong database 
- ki·ªÉm th·ª≠ k·ªãch b·∫£n kh√≥ (edge case): gi·∫£ l·∫≠p ƒëc nh·ªØng th·ª© server r·∫•t kh√≥ l√†m nh∆∞ server s·∫≠p (500),
m·∫°ng lag, l·ªói d·ªØ li·ªáu (409)
h·ªá th·ªëng core: gi·ªëng nh∆∞ trading, bank => s·∫Ω l√† h·ªá th·ªëng trung t√¢m cung c·∫•p t·∫•t c·∫£ y√™u c·∫ßu 
cho c√°c h·ªá th·ªëng v·ªá tinh
v√≠ d·ª• t√¥i l√† h·ªá th·ªëng th·∫ª (credit) => t√¥i c·∫ßn th√¥ng tin KH t·ª´ core 
- ·ªïn ƒë·ªãnh: b·ªüi v√¨ ch√∫ng ta gi·∫£ l·∫≠p res -> lo·∫°i b·ªè y·∫øu t·ªë do m·∫°ng lag hay server b·∫£o tr√¨

-> th√¨ ƒëeer th·ª±c ghi·ªán intercept trong playwright s·ª≠ d·ª•ng

await page.route('duong dan api muon chan', async(route)=>{
  logic xy ly o day
})

th·∫±ng PW c√≥ 1 feature r·∫•t hay 
ƒëc g·ªçi l√† waitForResponse() - nh·ªØng t√°c v·ª• ch·∫°y n·ªÅn nh∆∞ l√† download, upload, auto save

word vƒÉn b·∫£n (sau 10s ch·∫≥ng h·∫°n word s·∫Ω t·ª± ƒë·ªông save) -> c√≥ 1 s·ªë web c√≥ ch·ª©c nƒÉng auto save (·ªü d∆∞·ªõi n·ªÅn - k c√≥ UI ƒë·ªÉ t∆∞∆°ng t√°c)
th√¨ l√†m sao ch√∫ng ta d√πng UI m√† x·ª≠ l√Ω????? -> API -> FE s·∫Ω g·ªçi api save xu·ªëng BE -> wait for response autosave g·ªçi API th√†nh c√¥ng ->


tr∆∞·ªõc 1 h√†nh ƒë·ªông ch√∫ng ta ph·∫£i n√©m 1 c√°i b·∫´y (hay goiuj l√† event() => event li√™n quan t·ªõi vi·ªác ki·ªÉm so√°t c√°i action ƒë·∫•y)


1 tab = 1 page

1 browser = 1 context

-> multi tab => multi page 

popup windows = 1 tab = 1 page

M·ª•c ti√™u: l√† x√¢y d·ª±ng ƒëc 1 danh s√°ch c√°c tab, popup window -> ch√∫ng ta c√≥ th·ªÉ di chuy·ªÉn ho·∫∑c switch d·ªÖ d√†ng


c√≥ 1 action -> ch√∫ng ta ph·∫£i ƒë·∫∑t event tr∆∞·ªõc action
th√¨ tab v·ªõi windows t∆∞∆°ng t·ª±
page.waitforEvent('popup') -> popup windows
page.waitforEvent('page') -> tab

KHi test permission , multi role. -> ng∆∞·ªùi ta c≈©ng s·∫Ω defined ra r·∫•t nhi·ªÅu role v√† r·∫•t nhi·ªÅu permission

l√†m ma tr·∫≠n ph√¢n quy·ªÅn
    staff manager admin
C    Y 
R    N
U    N
D    Y

authen v√† author
